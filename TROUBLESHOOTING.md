# Пошаговая инструкция: Почему не работает админка

## Шаг 1: Проверьте текущий статус

**Что именно не работает?**
- [ ] Главная страница не открывается
- [ ] Админка `/admin/` показывает 404
- [ ] Админка открывается, но не работает
- [ ] Другое: _______________

## Шаг 2: Проверьте тип компонента на DigitalOcean

1. Зайдите в DigitalOcean → ваш App → Settings
2. Посмотрите на компонент "travel-gtr"
3. **Что там написано?**
   - [ ] "Static Site" ❌ (неправильно)
   - [ ] "Web Service" ✅ (правильно)

**Если "Static Site":**
- Нужно изменить на "Web Service"
- См. инструкцию ниже

## Шаг 3: Как изменить Static Site на Web Service

### Вариант A: Через App Spec (рекомендуется)

1. В DigitalOcean зайдите в ваш App
2. Найдите вкладку **"App Spec"** или **"Configuration"**
3. Скопируйте содержимое файла `.do/app.yaml` из репозитория
4. Вставьте в поле App Spec
5. Нажмите **"Save"** или **"Update"**
6. Дождитесь перезапуска приложения

### Вариант B: Через веб-интерфейс

1. В настройках компонента найдите кнопку **"Edit"**
2. Или удалите компонент и создайте новый:
   - Type: **Web Service** (не Static Site!)
   - Runtime: **PHP**
   - Source: `SMaliskins/TRAVEL-GTR`
   - Branch: `main`
   - **Run Command**: `php -S 0.0.0.0:8080 -t . router.php`
   - **HTTP Port**: `8080`

## Шаг 4: Проверьте файлы в репозитории

Убедитесь, что в репозитории есть:
- ✅ `.do/app.yaml` (конфигурация)
- ✅ `router.php` (маршрутизатор)
- ✅ `admin/index.php` (страница входа)
- ✅ `admin/config.php` (конфигурация админки)

## Шаг 5: Проверьте логи

1. В DigitalOcean зайдите в ваш App
2. Откройте вкладку **"Runtime Logs"** или **"Logs"**
3. Посмотрите, есть ли ошибки
4. Скопируйте ошибки и отправьте мне

## Шаг 6: Проверьте прямой доступ

Попробуйте открыть напрямую:
- `https://seahorse-app-fto76.ondigitalocean.app/admin/index.php`

**Если это работает:**
- Проблема в маршрутизации (router.php)
- Нужно проверить router.php

**Если это НЕ работает:**
- Проблема в настройках компонента
- Нужно изменить Static Site на Web Service

## Шаг 7: Что проверить в App Spec

Убедитесь, что в App Spec есть:

```yaml
services:          # ← ДОЛЖНО БЫТЬ services, НЕ static_sites
- name: travel-gtr
  run_command: php -S 0.0.0.0:8080 -t . router.php  # ← ДОЛЖНО БЫТЬ
  environment_slug: php  # ← ДОЛЖНО БЫТЬ
```

## Частые ошибки

❌ **Ошибка 1:** `static_sites` вместо `services`
- **Решение:** Измените на `services`

❌ **Ошибка 2:** Нет `run_command`
- **Решение:** Добавьте `run_command: php -S 0.0.0.0:8080 -t . router.php`

❌ **Ошибка 3:** `source_dir: /.do/app.yaml`
- **Решение:** Измените на `source_dir: /`

❌ **Ошибка 4:** Компонент все еще Static Site
- **Решение:** Удалите и создайте заново как Web Service

## Нужна помощь?

Отправьте мне:
1. Скриншот настроек компонента (что там написано - Static Site или Web Service?)
2. Скриншот App Spec (если используете)
3. Логи из DigitalOcean (Runtime Logs)
4. Что именно не работает (404, ошибка, или что-то другое)

